<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Draw a digit and let AI guess it using MNIST neural network">
    <title>Draw & Guess - AI Digit Recognition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="background-gradient"></div>

    <div class="container">
        <header>
            <h1 class="title">
                <span class="gradient-text">Draw & Guess</span>
            </h1>
            <p class="subtitle">Draw a digit and watch AI learn from you!</p>
        </header>

        <main class="game-area">
            <!-- Left Panel: Canvas + Controls -->
            <div class="canvas-panel">
                <div class="canvas-container">
                    <canvas id="drawCanvas" width="280" height="280"></canvas>
                    <div class="canvas-overlay" id="canvasOverlay">
                        <span class="hint-text">‚úèÔ∏è Draw a digit (0-9)</span>
                    </div>
                </div>
                <button id="clearBtn" class="btn btn-clear">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                    </svg>
                    Clear Canvas
                </button>
            </div>

            <!-- Right Panel: Prediction + Learning -->
            <div class="prediction-section" id="predictionSection">
                <div class="prediction-header">
                    <h2>AI Prediction</h2>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span class="status-text">Ready</span>
                    </div>
                </div>

                <div class="main-prediction" id="mainPrediction">
                    <div class="predicted-digit">?</div>
                    <div class="confidence-label">Draw to predict</div>
                </div>

                <!-- Feedback Section for Learning -->
                <div class="feedback-section" id="feedbackSection">
                    <h3>Teach the AI</h3>
                    <p class="feedback-hint">Was this correct? If not, select the right digit:</p>
                    <div class="digit-buttons" id="digitButtons">
                        <button class="digit-btn" data-digit="0">0</button>
                        <button class="digit-btn" data-digit="1">1</button>
                        <button class="digit-btn" data-digit="2">2</button>
                        <button class="digit-btn" data-digit="3">3</button>
                        <button class="digit-btn" data-digit="4">4</button>
                        <button class="digit-btn" data-digit="5">5</button>
                        <button class="digit-btn" data-digit="6">6</button>
                        <button class="digit-btn" data-digit="7">7</button>
                        <button class="digit-btn" data-digit="8">8</button>
                        <button class="digit-btn" data-digit="9">9</button>
                    </div>
                    <button id="correctBtn" class="btn btn-correct">
                        ‚úì Correct! (Train AI)
                    </button>
                </div>

                <!-- Learning Stats -->
                <div class="learning-stats" id="learningStats">
                    <h3>üìä Learning Progress</h3>
                    <div class="stat-row">
                        <span>Training samples:</span>
                        <span id="sampleCount">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Model accuracy:</span>
                        <span id="accuracyDisplay">--</span>
                    </div>
                    <div class="stat-row">
                        <span>Cloud sync:</span>
                        <span id="syncStatus">üîÑ Loading...</span>
                    </div>
                    <div class="button-group">
                        <button id="saveModelBtn" class="btn btn-save">üíæ Save Model</button>
                        <button id="resetModelBtn" class="btn btn-reset">Reset Model</button>
                    </div>
                </div>

                <div class="all-predictions" id="allPredictions">
                    <h3>Confidence Scores</h3>
                    <div class="predictions-grid">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Powered by TensorFlow.js & Firebase ‚Ä¢ AI learns from your drawings!</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
    <script src="script.js"></script>
</body>

</html>